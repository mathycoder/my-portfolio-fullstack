{"ast":null,"code":"'use strict';\n\nconst logger = require('../logger').child({\n  component: 'kubernetes-info'\n});\n\nlet info = null;\nmodule.exports = getKubernetesInfo;\n\nmodule.exports.clearCache = function clearAWSCache() {\n  info = null;\n};\n\nfunction getKubernetesInfo(agent, callback) {\n  if (!agent.config.utilization || !agent.config.utilization.detect_kubernetes) {\n    return setImmediate(callback, null, null);\n  }\n\n  if (info) {\n    return setImmediate(callback, null, info);\n  }\n\n  if (!process.env.KUBERNETES_SERVICE_HOST) {\n    logger.debug('No Kubernetes service host found.');\n    return setImmediate(callback, null, null);\n  }\n\n  info = {\n    kubernetes_service_host: process.env.KUBERNETES_SERVICE_HOST\n  };\n  setImmediate(callback, null, info);\n}","map":{"version":3,"sources":["/Users/adamsarli/Coding/my-portfolio/node_modules/newrelic/lib/utilization/kubernetes-info.js"],"names":["logger","require","child","component","info","module","exports","getKubernetesInfo","clearCache","clearAWSCache","agent","callback","config","utilization","detect_kubernetes","setImmediate","process","env","KUBERNETES_SERVICE_HOST","debug","kubernetes_service_host"],"mappings":"AAAA;;AACA,MAAMA,MAAM,GAAGC,OAAO,CAAC,WAAD,CAAP,CAAqBC,KAArB,CAA2B;AAACC,EAAAA,SAAS,EAAE;AAAZ,CAA3B,CAAf;;AAEA,IAAIC,IAAI,GAAG,IAAX;AAEAC,MAAM,CAACC,OAAP,GAAiBC,iBAAjB;;AACAF,MAAM,CAACC,OAAP,CAAeE,UAAf,GAA4B,SAASC,aAAT,GAAyB;AACnDL,EAAAA,IAAI,GAAG,IAAP;AACD,CAFD;;AAIA,SAASG,iBAAT,CAA2BG,KAA3B,EAAkCC,QAAlC,EAA4C;AAC1C,MAAI,CAACD,KAAK,CAACE,MAAN,CAAaC,WAAd,IAA6B,CAACH,KAAK,CAACE,MAAN,CAAaC,WAAb,CAAyBC,iBAA3D,EAA8E;AAC5E,WAAOC,YAAY,CAACJ,QAAD,EAAW,IAAX,EAAiB,IAAjB,CAAnB;AACD;;AAED,MAAIP,IAAJ,EAAU;AACR,WAAOW,YAAY,CAACJ,QAAD,EAAW,IAAX,EAAiBP,IAAjB,CAAnB;AACD;;AAED,MAAI,CAACY,OAAO,CAACC,GAAR,CAAYC,uBAAjB,EAA0C;AACxClB,IAAAA,MAAM,CAACmB,KAAP,CAAa,mCAAb;AACA,WAAOJ,YAAY,CAACJ,QAAD,EAAW,IAAX,EAAiB,IAAjB,CAAnB;AACD;;AAEDP,EAAAA,IAAI,GAAG;AAACgB,IAAAA,uBAAuB,EAAEJ,OAAO,CAACC,GAAR,CAAYC;AAAtC,GAAP;AAEAH,EAAAA,YAAY,CAACJ,QAAD,EAAW,IAAX,EAAiBP,IAAjB,CAAZ;AACD","sourcesContent":["'use strict'\nconst logger = require('../logger').child({component: 'kubernetes-info'})\n\nlet info = null\n\nmodule.exports = getKubernetesInfo\nmodule.exports.clearCache = function clearAWSCache() {\n  info = null\n}\n\nfunction getKubernetesInfo(agent, callback) {\n  if (!agent.config.utilization || !agent.config.utilization.detect_kubernetes) {\n    return setImmediate(callback, null, null)\n  }\n\n  if (info) {\n    return setImmediate(callback, null, info)\n  }\n\n  if (!process.env.KUBERNETES_SERVICE_HOST) {\n    logger.debug('No Kubernetes service host found.')\n    return setImmediate(callback, null, null)\n  }\n\n  info = {kubernetes_service_host: process.env.KUBERNETES_SERVICE_HOST}\n\n  setImmediate(callback, null, info)\n}\n"]},"metadata":{},"sourceType":"script"}